(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const dr=!1;var tn=Array.isArray,Ls=Array.prototype.indexOf,Dn=Array.from,Nr=Object.defineProperty,at=Object.getOwnPropertyDescriptor,Br=Object.getOwnPropertyDescriptors,Is=Object.prototype,Ds=Array.prototype,qn=Object.getPrototypeOf,hr=Object.isExtensible;const lt=()=>{};function qs(t){return t()}function En(t){for(var e=0;e<t.length;e++)t[e]()}const he=2,Pr=4,nn=8,Mn=16,Oe=32,ut=64,jt=128,ae=256,Ht=512,te=1024,xe=2048,Ue=4096,Ae=8192,rn=16384,Ms=32768,Fn=65536,Lr=1<<17,Fs=1<<19,Ir=1<<20,Sn=1<<21,Ge=Symbol("$state"),Us=Symbol("legacy props"),Ws=Symbol("");function Dr(t){return t===this.v}function qr(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Un(t){return!qr(t,this.v)}function js(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Hs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Vs(t){throw new Error("https://svelte.dev/e/effect_orphan")}function zs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ks(t){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Ys(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Js(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Xs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Gs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let ft=!1,Qs=!1;function Zs(){ft=!0}const Wn=1,jn=2,Mr=4,ei=8,ti=16,ni=1,ri=2,si=4,ii=8,oi=16,ai=1,li=2,se=Symbol(),ci="http://www.w3.org/1999/xhtml";function Hn(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let q=null;function vr(t){q=t}function W(t,e=!1,n){var r=q={p:q,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};ft&&!e&&(q.l={s:null,u:null,r1:[],r2:kt(!1)}),zn(()=>{r.d=!0})}function j(t){const e=q;if(e!==null){const o=e.e;if(o!==null){var n=M,r=F;e.e=null;try{for(var s=0;s<o.length;s++){var i=o[s];Fe(i.effect),ke(i.reaction),Kn(i.fn)}}finally{Fe(n),ke(r)}}q=e.p,e.m=!0}return{}}function Tt(){return!ft||q!==null&&q.l===null}function Je(t){if(typeof t!="object"||t===null||Ge in t)return t;const e=qn(t);if(e!==Is&&e!==Ds)return t;var n=new Map,r=tn(t),s=Ne(0),i=F,o=a=>{var l=F;ke(i);var c=a();return ke(l),c};return r&&n.set("length",Ne(t.length)),new Proxy(t,{defineProperty(a,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Js();var d=n.get(l);return d===void 0?(d=o(()=>Ne(c.value)),n.set(l,d)):L(d,o(()=>Je(c.value))),!0},deleteProperty(a,l){var c=n.get(l);if(c===void 0)l in a&&(n.set(l,o(()=>Ne(se))),pn(s));else{if(r&&typeof l=="string"){var d=n.get("length"),v=Number(l);Number.isInteger(v)&&v<d.v&&L(d,v)}L(c,se),pn(s)}return!0},get(a,l,c){var h;if(l===Ge)return t;var d=n.get(l),v=l in a;if(d===void 0&&(!v||(h=at(a,l))!=null&&h.writable)&&(d=o(()=>Ne(Je(v?a[l]:se))),n.set(l,d)),d!==void 0){var f=g(d);return f===se?void 0:f}return Reflect.get(a,l,c)},getOwnPropertyDescriptor(a,l){var c=Reflect.getOwnPropertyDescriptor(a,l);if(c&&"value"in c){var d=n.get(l);d&&(c.value=g(d))}else if(c===void 0){var v=n.get(l),f=v==null?void 0:v.v;if(v!==void 0&&f!==se)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(a,l){var f;if(l===Ge)return!0;var c=n.get(l),d=c!==void 0&&c.v!==se||Reflect.has(a,l);if(c!==void 0||M!==null&&(!d||(f=at(a,l))!=null&&f.writable)){c===void 0&&(c=o(()=>Ne(d?Je(a[l]):se)),n.set(l,c));var v=g(c);if(v===se)return!1}return d},set(a,l,c,d){var T;var v=n.get(l),f=l in a;if(r&&l==="length")for(var h=c;h<v.v;h+=1){var p=n.get(h+"");p!==void 0?L(p,se):h in a&&(p=o(()=>Ne(se)),n.set(h+"",p))}v===void 0?(!f||(T=at(a,l))!=null&&T.writable)&&(v=o(()=>Ne(void 0)),L(v,o(()=>Je(c))),n.set(l,v)):(f=v.v!==se,L(v,o(()=>Je(c))));var b=Reflect.getOwnPropertyDescriptor(a,l);if(b!=null&&b.set&&b.set.call(d,c),!f){if(r&&typeof l=="string"){var k=n.get("length"),E=Number(l);Number.isInteger(E)&&E>=k.v&&L(k,E+1)}pn(s)}return!0},ownKeys(a){g(s);var l=Reflect.ownKeys(a).filter(v=>{var f=n.get(v);return f===void 0||f.v!==se});for(var[c,d]of n)d.v!==se&&!(c in a)&&l.push(c);return l},setPrototypeOf(){Xs()}})}function pn(t,e=1){L(t,t.v+e)}function wt(t){var e=he|xe,n=F!==null&&(F.f&he)!==0?F:null;return M===null||n!==null&&(n.f&ae)!==0?e|=ae:M.f|=Ir,{ctx:q,deps:null,effects:null,equals:Dr,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:n??M}}function ct(t){const e=wt(t);return e.equals=Un,e}function Fr(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)Me(e[n])}}function ui(t){for(var e=t.parent;e!==null;){if((e.f&he)===0)return e;e=e.parent}return null}function Ur(t){var e,n=M;Fe(ui(t));try{Fr(t),e=rs(t)}finally{Fe(n)}return e}function Wr(t){var e=Ur(t),n=(De||(t.f&ae)!==0)&&t.deps!==null?Ue:te;ve(t,n),t.equals(e)||(t.v=e,t.wv=ts())}const xt=new Map;function kt(t,e){var n={f:0,v:t,reactions:null,equals:Dr,rv:0,wv:0};return n}function Ne(t,e){const n=kt(t);return yi(n),n}function K(t,e=!1){var r;const n=kt(t);return e||(n.equals=Un),ft&&q!==null&&q.l!==null&&((r=q.l).s??(r.s=[])).push(n),n}function L(t,e,n=!1){F!==null&&!be&&Tt()&&(F.f&(he|Mn))!==0&&!(ee!=null&&ee.includes(t))&&Gs();let r=n?Je(e):e;return Et(t,r)}function Et(t,e){if(!t.equals(e)){var n=t.v;Rt?xt.set(t,e):xt.set(t,n),t.v=e,(t.f&he)!==0&&((t.f&xe)!==0&&Ur(t),ve(t,(t.f&ae)===0?te:Ue)),t.wv=ts(),jr(t,xe),Tt()&&M!==null&&(M.f&te)!==0&&(M.f&(Oe|ut))===0&&(fe===null?bi([t]):fe.push(t))}return e}function jr(t,e){var n=t.reactions;if(n!==null)for(var r=Tt(),s=n.length,i=0;i<s;i++){var o=n[i],a=o.f;(a&xe)===0&&(!r&&o===M||(ve(o,e),(a&(te|ae))!==0&&((a&he)!==0?jr(o,Ue):un(o))))}}let fi=!1;var pr,Hr,Vr,zr;function di(){if(pr===void 0){pr=window,Hr=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Vr=at(e,"firstChild").get,zr=at(e,"nextSibling").get,hr(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),hr(n)&&(n.__t=void 0)}}function Vn(t=""){return document.createTextNode(t)}function Ie(t){return Vr.call(t)}function sn(t){return zr.call(t)}function m(t,e){return Ie(t)}function le(t,e){{var n=Ie(t);return n instanceof Comment&&n.data===""?sn(n):n}}function _(t,e=1,n=!1){let r=t;for(;e--;)r=sn(r);return r}function hi(t){t.textContent=""}function Kr(t){M===null&&F===null&&Vs(),F!==null&&(F.f&ae)!==0&&M===null&&Hs(),Rt&&js()}function vi(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function dt(t,e,n,r=!0){var s=M,i={ctx:q,deps:null,nodes_start:null,nodes_end:null,f:t|xe,first:null,fn:e,last:null,next:null,parent:s,prev:null,teardown:null,transitions:null,wv:0};if(n)try{cn(i),i.f|=Ms}catch(l){throw Me(i),l}else e!==null&&un(i);var o=n&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&(Ir|jt))===0;if(!o&&r&&(s!==null&&vi(i,s),F!==null&&(F.f&he)!==0)){var a=F;(a.effects??(a.effects=[])).push(i)}return i}function zn(t){const e=dt(nn,null,!1);return ve(e,te),e.teardown=t,e}function $n(t){Kr();var e=M!==null&&(M.f&Oe)!==0&&q!==null&&!q.m;if(e){var n=q;(n.e??(n.e=[])).push({fn:t,effect:M,reaction:F})}else{var r=Kn(t);return r}}function pi(t){return Kr(),At(t)}function _i(t){const e=dt(ut,t,!0);return(n={})=>new Promise(r=>{n.outro?Vt(e,()=>{Me(e),r(void 0)}):(Me(e),r(void 0))})}function Kn(t){return dt(Pr,t,!1)}function et(t,e){var n=q,r={effect:null,ran:!1};n.l.r1.push(r),r.effect=At(()=>{t(),!r.ran&&(r.ran=!0,L(n.l.r2,!0),ge(e))})}function on(){var t=q;At(()=>{if(g(t.l.r2)){for(var e of t.l.r1){var n=e.effect;(n.f&te)!==0&&ve(n,Ue),ht(n)&&cn(n),e.ran=!1}t.l.r2.v=!1}})}function At(t){return dt(nn,t,!0)}function C(t,e=[],n=wt){const r=e.map(n);return Yn(()=>t(...r.map(g)))}function Yn(t,e=0){return dt(nn|Mn|e,t,!0)}function St(t,e=!0){return dt(nn|Oe,t,!0,e)}function Yr(t){var e=t.teardown;if(e!==null){const n=Rt,r=F;_r(!0),ke(null);try{e.call(null)}finally{_r(n),ke(r)}}}function Jr(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){var r=n.next;(n.f&ut)!==0?n.parent=null:Me(n,e),n=r}}function gi(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Oe)===0&&Me(e),e=n}}function Me(t,e=!0){var n=!1;(e||(t.f&Fs)!==0)&&t.nodes_start!==null&&(Xr(t.nodes_start,t.nodes_end),n=!0),Jr(t,e&&!n),Xt(t,0),ve(t,rn);var r=t.transitions;if(r!==null)for(const i of r)i.stop();Yr(t);var s=t.parent;s!==null&&s.first!==null&&Gr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Xr(t,e){for(;t!==null;){var n=t===e?null:sn(t);t.remove(),t=n}}function Gr(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Vt(t,e){var n=[];Jn(t,n,!0),Qr(n,()=>{Me(t),e&&e()})}function Qr(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var s of t)s.out(r)}else e()}function Jn(t,e,n){if((t.f&Ae)===0){if(t.f^=Ae,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var r=t.first;r!==null;){var s=r.next,i=(r.f&Fn)!==0||(r.f&Oe)!==0;Jn(r,e,i?n:!1),r=s}}}function zt(t){Zr(t,!0)}function Zr(t,e){if((t.f&Ae)!==0){t.f^=Ae,(t.f&te)===0&&(t.f^=te),ht(t)&&(ve(t,xe),un(t));for(var n=t.first;n!==null;){var r=n.next,s=(n.f&Fn)!==0||(n.f&Oe)!==0;Zr(n,s?e:!1),n=r}if(t.transitions!==null)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let Kt=[];function mi(){var t=Kt;Kt=[],En(t)}function an(t){Kt.length===0&&queueMicrotask(mi),Kt.push(t)}let Dt=!1,Tn=!1,Yt=null,Qe=!1,Rt=!1;function _r(t){Rt=t}let qt=[];let F=null,be=!1;function ke(t){F=t}let M=null;function Fe(t){M=t}let ee=null;function yi(t){F!==null&&F.f&Sn&&(ee===null?ee=[t]:ee.push(t))}let Z=null,ie=0,fe=null;function bi(t){fe=t}let es=1,Jt=0,De=!1,Pe=null;function ts(){return++es}function ht(t){var v;var e=t.f;if((e&xe)!==0)return!0;if((e&Ue)!==0){var n=t.deps,r=(e&ae)!==0;if(n!==null){var s,i,o=(e&Ht)!==0,a=r&&M!==null&&!De,l=n.length;if(o||a){var c=t,d=c.parent;for(s=0;s<l;s++)i=n[s],(o||!((v=i==null?void 0:i.reactions)!=null&&v.includes(c)))&&(i.reactions??(i.reactions=[])).push(c);o&&(c.f^=Ht),a&&d!==null&&(d.f&ae)===0&&(c.f^=ae)}for(s=0;s<l;s++)if(i=n[s],ht(i)&&Wr(i),i.wv>t.wv)return!0}(!r||M!==null&&!De)&&ve(t,te)}return!1}function wi(t,e){for(var n=e;n!==null;){if((n.f&jt)!==0)try{n.fn(t);return}catch{n.f^=jt}n=n.parent}throw Dt=!1,t}function gr(t){return(t.f&rn)===0&&(t.parent===null||(t.parent.f&jt)===0)}function ln(t,e,n,r){if(Dt){if(n===null&&(Dt=!1),gr(e))throw t;return}if(n!==null&&(Dt=!0),wi(t,e),gr(e))throw t}function ns(t,e,n=!0){var r=t.reactions;if(r!==null)for(var s=0;s<r.length;s++){var i=r[s];ee!=null&&ee.includes(t)||((i.f&he)!==0?ns(i,e,!1):e===i&&(n?ve(i,xe):(i.f&te)!==0&&ve(i,Ue),un(i)))}}function rs(t){var h;var e=Z,n=ie,r=fe,s=F,i=De,o=ee,a=q,l=be,c=t.f;Z=null,ie=0,fe=null,De=(c&ae)!==0&&(be||!Qe||F===null),F=(c&(Oe|ut))===0?t:null,ee=null,vr(t.ctx),be=!1,Jt++,t.f|=Sn;try{var d=(0,t.fn)(),v=t.deps;if(Z!==null){var f;if(Xt(t,ie),v!==null&&ie>0)for(v.length=ie+Z.length,f=0;f<Z.length;f++)v[ie+f]=Z[f];else t.deps=v=Z;if(!De)for(f=ie;f<v.length;f++)((h=v[f]).reactions??(h.reactions=[])).push(t)}else v!==null&&ie<v.length&&(Xt(t,ie),v.length=ie);if(Tt()&&fe!==null&&!be&&v!==null&&(t.f&(he|Ue|xe))===0)for(f=0;f<fe.length;f++)ns(fe[f],t);return s!==null&&s!==t&&(Jt++,fe!==null&&(r===null?r=fe:r.push(...fe))),d}finally{Z=e,ie=n,fe=r,F=s,De=i,ee=o,vr(a),be=l,t.f^=Sn}}function xi(t,e){let n=e.reactions;if(n!==null){var r=Ls.call(n,t);if(r!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(e.f&he)!==0&&(Z===null||!Z.includes(e))&&(ve(e,Ue),(e.f&(ae|Ht))===0&&(e.f^=Ht),Fr(e),Xt(e,0))}function Xt(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)xi(t,n[r])}function cn(t){var e=t.f;if((e&rn)===0){ve(t,te);var n=M,r=q,s=Qe;M=t,Qe=!0;try{(e&Mn)!==0?gi(t):Jr(t),Yr(t);var i=rs(t);t.teardown=typeof i=="function"?i:null,t.wv=es;var o=t.deps,a;dr&&Qs&&t.f&xe}catch(l){ln(l,t,n,r||t.ctx)}finally{Qe=s,M=n}}}function ki(){try{zs()}catch(t){if(Yt!==null)ln(t,Yt,null);else throw t}}function Ei(){var t=Qe;try{var e=0;for(Qe=!0;qt.length>0;){e++>1e3&&ki();var n=qt,r=n.length;qt=[];for(var s=0;s<r;s++){var i=$i(n[s]);Si(i)}xt.clear()}}finally{Tn=!1,Qe=t,Yt=null}}function Si(t){var e=t.length;if(e!==0)for(var n=0;n<e;n++){var r=t[n];if((r.f&(rn|Ae))===0)try{ht(r)&&(cn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Gr(r):r.fn=null))}catch(s){ln(s,r,null,r.ctx)}}}function un(t){Tn||(Tn=!0,queueMicrotask(Ei));for(var e=Yt=t;e.parent!==null;){e=e.parent;var n=e.f;if((n&(ut|Oe))!==0){if((n&te)===0)return;e.f^=te}}qt.push(e)}function $i(t){for(var e=[],n=t;n!==null;){var r=n.f,s=(r&(Oe|ut))!==0,i=s&&(r&te)!==0;if(!i&&(r&Ae)===0){if((r&Pr)!==0)e.push(n);else if(s)n.f^=te;else try{ht(n)&&cn(n)}catch(l){ln(l,n,null,n.ctx)}var o=n.first;if(o!==null){n=o;continue}}var a=n.parent;for(n=n.next;n===null&&a!==null;)n=a.next,a=a.parent}return e}function g(t){var e=t.f,n=(e&he)!==0;if(Pe!==null&&Pe.add(t),F!==null&&!be){if(!(ee!=null&&ee.includes(t))){var r=F.deps;t.rv<Jt&&(t.rv=Jt,Z===null&&r!==null&&r[ie]===t?ie++:Z===null?Z=[t]:(!De||!Z.includes(t))&&Z.push(t))}}else if(n&&t.deps===null&&t.effects===null){var s=t,i=s.parent;i!==null&&(i.f&ae)===0&&(s.f^=ae)}return n&&(s=t,ht(s)&&Wr(s)),Rt&&xt.has(t)?xt.get(t):t.v}function Ti(t){var e=Pe;Pe=new Set;var n=Pe,r;try{if(ge(t),e!==null)for(r of Pe)e.add(r)}finally{Pe=e}return n}function Ai(t){var e=Ti(()=>ge(t));for(var n of e)if((n.f&Lr)!==0)for(const r of n.deps||[])(r.f&he)===0&&Et(r,r.v);else Et(n,n.v)}function ge(t){var e=be;try{return be=!0,t()}finally{be=e}}const Ri=-7169;function ve(t,e){t.f=t.f&Ri|e}function Oi(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Ge in t)An(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Ge in n&&An(n)}}}function An(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{An(t[r],e)}catch{}const n=qn(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Br(n);for(let s in r){const i=r[s].get;if(i)try{i.call(t)}catch{}}}}}const Ci=["touchstart","touchmove"];function Ni(t){return Ci.includes(t)}function Bi(t,e){{const n=document.body;t.autofocus=!0,an(()=>{document.activeElement===n&&t.focus()})}}let mr=!1;function Pi(){mr||(mr=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const n of t.target.elements)(e=n.__on_r)==null||e.call(n)})},{capture:!0}))}function ss(t){var e=F,n=M;ke(null),Fe(null);try{return t()}finally{ke(e),Fe(n)}}function Li(t,e,n,r=n){t.addEventListener(e,()=>ss(n));const s=t.__on_r;s?t.__on_r=()=>{s(),r(!0)}:t.__on_r=()=>r(!0),Pi()}const Ii=new Set,yr=new Set;function Di(t,e,n,r={}){function s(i){if(r.capture||mt.call(e,i),!i.cancelBubble)return ss(()=>n==null?void 0:n.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?an(()=>{e.addEventListener(t,s,r)}):e.addEventListener(t,s,r),s}function U(t,e,n,r,s){var i={capture:r,passive:s},o=Di(t,e,n,i);(e===document.body||e===window||e===document)&&zn(()=>{e.removeEventListener(t,o,i)})}function mt(t){var T;var e=this,n=e.ownerDocument,r=t.type,s=((T=t.composedPath)==null?void 0:T.call(t))||[],i=s[0]||t.target,o=0,a=t.__root;if(a){var l=s.indexOf(a);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var c=s.indexOf(e);if(c===-1)return;l<=c&&(o=l)}if(i=s[o]||t.target,i!==e){Nr(t,"currentTarget",{configurable:!0,get(){return i||n}});var d=F,v=M;ke(null),Fe(null);try{for(var f,h=[];i!==null;){var p=i.assignedSlot||i.parentNode||i.host||null;try{var b=i["__"+r];if(b!=null&&(!i.disabled||t.target===i))if(tn(b)){var[k,...E]=b;k.apply(i,[t,...E])}else b.call(i,t)}catch(R){f?h.push(R):f=R}if(t.cancelBubble||p===e||p===null)break;i=p}if(f){for(let R of h)queueMicrotask(()=>{throw R});throw f}}finally{t.__root=e,delete t.currentTarget,ke(d),Fe(v)}}}function is(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function Gt(t,e){var n=M;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function O(t,e){var n=(e&ai)!==0,r=(e&li)!==0,s,i=!t.startsWith("<!>");return()=>{s===void 0&&(s=is(i?t:"<!>"+t),n||(s=Ie(s)));var o=r||Hr?document.importNode(s,!0):s.cloneNode(!0);if(n){var a=Ie(o),l=o.lastChild;Gt(a,l)}else Gt(o,o);return o}}function Re(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Vn();return t.append(e,n),Gt(e,n),t}function S(t,e){t!==null&&t.before(e)}function H(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function qi(t,e){return Mi(t,e)}const st=new Map;function Mi(t,{target:e,anchor:n,props:r={},events:s,context:i,intro:o=!0}){di();var a=new Set,l=v=>{for(var f=0;f<v.length;f++){var h=v[f];if(!a.has(h)){a.add(h);var p=Ni(h);e.addEventListener(h,mt,{passive:p});var b=st.get(h);b===void 0?(document.addEventListener(h,mt,{passive:p}),st.set(h,1)):st.set(h,b+1)}}};l(Dn(Ii)),yr.add(l);var c=void 0,d=_i(()=>{var v=n??e.appendChild(Vn());return St(()=>{if(i){W({});var f=q;f.c=i}s&&(r.$$events=s),c=t(v,r)||{},i&&j()}),()=>{var p;for(var f of a){e.removeEventListener(f,mt);var h=st.get(f);--h===0?(document.removeEventListener(f,mt),st.delete(f)):st.set(f,h)}yr.delete(l),v!==n&&((p=v.parentNode)==null||p.removeChild(v))}});return Fi.set(c,d),c}let Fi=new WeakMap;function D(t,e,[n,r]=[0,0]){var s=t,i=null,o=null,a=se,l=n>0?Fn:0,c=!1;const d=(f,h=!0)=>{c=!0,v(h,f)},v=(f,h)=>{a!==(a=f)&&(a?(i?zt(i):h&&(i=St(()=>h(s))),o&&Vt(o,()=>{o=null})):(o?zt(o):h&&(o=St(()=>h(s,[n+1,r]))),i&&Vt(i,()=>{i=null})))};Yn(()=>{c=!1,e(d),c||v(null,null)},l)}function Ee(t,e){return e}function Ui(t,e,n,r){for(var s=[],i=e.length,o=0;o<i;o++)Jn(e[o].e,s,!0);var a=i>0&&s.length===0&&n!==null;if(a){var l=n.parentNode;hi(l),l.append(n),r.clear(),Be(t,e[0].prev,e[i-1].next)}Qr(s,()=>{for(var c=0;c<i;c++){var d=e[c];a||(r.delete(d.k),Be(t,d.prev,d.next)),Me(d.e,!a)}})}function me(t,e,n,r,s,i=null){var o=t,a={flags:e,items:new Map,first:null},l=(e&Mr)!==0;if(l){var c=t;o=c.appendChild(Vn())}var d=null,v=!1,f=ct(()=>{var h=n();return tn(h)?h:h==null?[]:Dn(h)});Yn(()=>{var h=g(f),p=h.length;v&&p===0||(v=p===0,Wi(h,a,o,s,e,r,n),i!==null&&(p===0?d?zt(d):d=St(()=>i(o)):d!==null&&Vt(d,()=>{d=null})),g(f))})}function Wi(t,e,n,r,s,i,o){var nt,je,He,rt;var a=(s&ei)!==0,l=(s&(Wn|jn))!==0,c=t.length,d=e.items,v=e.first,f=v,h,p=null,b,k=[],E=[],T,R,w,x;if(a)for(x=0;x<c;x+=1)T=t[x],R=i(T,x),w=d.get(R),w!==void 0&&((nt=w.a)==null||nt.measure(),(b??(b=new Set)).add(w));for(x=0;x<c;x+=1){if(T=t[x],R=i(T,x),w=d.get(R),w===void 0){var N=f?f.e.nodes_start:n;p=Hi(N,e,p,p===null?e.first:p.next,T,R,x,r,s,o),d.set(R,p),k=[],E=[],f=p.next;continue}if(l&&ji(w,T,x,s),(w.e.f&Ae)!==0&&(zt(w.e),a&&((je=w.a)==null||je.unfix(),(b??(b=new Set)).delete(w))),w!==f){if(h!==void 0&&h.has(w)){if(k.length<E.length){var A=E[0],$;p=A.prev;var I=k[0],X=k[k.length-1];for($=0;$<k.length;$+=1)br(k[$],A,n);for($=0;$<E.length;$+=1)h.delete(E[$]);Be(e,I.prev,X.next),Be(e,p,I),Be(e,X,A),f=A,p=X,x-=1,k=[],E=[]}else h.delete(w),br(w,f,n),Be(e,w.prev,w.next),Be(e,w,p===null?e.first:p.next),Be(e,p,w),p=w;continue}for(k=[],E=[];f!==null&&f.k!==R;)(f.e.f&Ae)===0&&(h??(h=new Set)).add(f),E.push(f),f=f.next;if(f===null)continue;w=f}k.push(w),p=w,f=w.next}if(f!==null||h!==void 0){for(var Q=h===void 0?[]:Dn(h);f!==null;)(f.e.f&Ae)===0&&Q.push(f),f=f.next;var ue=Q.length;if(ue>0){var _t=(s&Mr)!==0&&c===0?n:null;if(a){for(x=0;x<ue;x+=1)(He=Q[x].a)==null||He.measure();for(x=0;x<ue;x+=1)(rt=Q[x].a)==null||rt.fix()}Ui(e,Q,_t,d)}}a&&an(()=>{var B;if(b!==void 0)for(w of b)(B=w.a)==null||B.apply()}),M.first=e.first&&e.first.e,M.last=p&&p.e}function ji(t,e,n,r){(r&Wn)!==0&&Et(t.v,e),(r&jn)!==0?Et(t.i,n):t.i=n}function Hi(t,e,n,r,s,i,o,a,l,c){var d=(l&Wn)!==0,v=(l&ti)===0,f=d?v?K(s):kt(s):s,h=(l&jn)===0?o:kt(o),p={i:h,v:f,k:i,a:null,e:null,prev:n,next:r};try{return p.e=St(()=>a(t,f,h,c),fi),p.e.prev=n&&n.e,p.e.next=r&&r.e,n===null?e.first=p:(n.next=p,n.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{}}function br(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,s=e?e.e.nodes_start:n,i=t.e.nodes_start;i!==r;){var o=sn(i);s.before(i),i=o}}function Be(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Vi(t,e,n=!1,r=!1,s=!1){var i=t,o="";C(()=>{var a=M;if(o!==(o=e()??"")&&(a.nodes_start!==null&&(Xr(a.nodes_start,a.nodes_end),a.nodes_start=a.nodes_end=null),o!=="")){var l=o+"";n?l=`<svg>${l}</svg>`:r&&(l=`<math>${l}</math>`);var c=is(l);if((n||r)&&(c=Ie(c)),Gt(Ie(c),c.lastChild),n||r)for(;Ie(c);)i.before(Ie(c));else i.before(c)}})}function os(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=os(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function zi(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=os(t))&&(r&&(r+=" "),r+=e);return r}function $t(t){return typeof t=="object"?zi(t):t??""}function Ki(t,e,n){var r=t==null?"":""+t;return e&&(r=r?r+" "+e:e),r===""?null:r}function Yi(t,e){return t==null?null:String(t)}function y(t,e,n,r,s,i){var o=t.__className;if(o!==n||o===void 0){var a=Ki(n,r);a==null?t.removeAttribute("class"):t.className=a,t.__className=n}return i}function ot(t,e,n,r){var s=t.__style;if(s!==e){var i=Yi(e);i==null?t.removeAttribute("style"):t.style.cssText=i,t.__style=e}return r}const Ji=Symbol("is custom element"),Xi=Symbol("is html");function Qt(t,e,n,r){var s=Gi(t);s[e]!==(s[e]=n)&&(e==="loading"&&(t[Ws]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Qi(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Gi(t){return t.__attributes??(t.__attributes={[Ji]:t.nodeName.includes("-"),[Xi]:t.namespaceURI===ci})}var wr=new Map;function Qi(t){var e=wr.get(t.nodeName);if(e)return e;wr.set(t.nodeName,e=[]);for(var n,r=t,s=Element.prototype;s!==r;){n=Br(r);for(var i in n)n[i].set&&e.push(i);r=qn(r)}return e}function Zi(t,e,n=e){var r=Tt();Li(t,"input",s=>{var i=s?t.defaultValue:t.value;if(i=_n(t)?gn(i):i,n(i),r&&i!==(i=e())){var o=t.selectionStart,a=t.selectionEnd;t.value=i??"",a!==null&&(t.selectionStart=o,t.selectionEnd=Math.min(a,t.value.length))}}),ge(e)==null&&t.value&&n(_n(t)?gn(t.value):t.value),At(()=>{var s=e();_n(t)&&s===gn(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function _n(t){var e=t.type;return e==="number"||e==="range"}function gn(t){return t===""?null:+t}function xr(t,e){return t===e||(t==null?void 0:t[Ge])===e}function Ze(t={},e,n,r){return Kn(()=>{var s,i;return At(()=>{s=i,i=[],ge(()=>{t!==n(...i)&&(e(t,...i),s&&xr(n(...s),t)&&e(null,...s))})}),()=>{an(()=>{i&&xr(n(...i),t)&&e(null,...i)})}}),t}function as(t){return function(...e){var n=e[0];return n.stopPropagation(),t==null?void 0:t.apply(this,e)}}function V(t=!1){const e=q,n=e.l.u;if(!n)return;let r=()=>Oi(e.s);if(t){let s=0,i={};const o=wt(()=>{let a=!1;const l=e.s;for(const c in l)l[c]!==i[c]&&(i[c]=l[c],a=!0);return a&&s++,s});r=()=>g(o)}n.b.length&&pi(()=>{kr(e,r),En(n.b)}),$n(()=>{const s=ge(()=>n.m.map(qs));return()=>{for(const i of s)typeof i=="function"&&i()}}),n.a.length&&$n(()=>{kr(e,r),En(n.a)})}function kr(t,e){if(t.l.s)for(const n of t.l.s)g(n);e()}function ls(t,e){var i;var n=(i=t.$$events)==null?void 0:i[e.type],r=tn(n)?n.slice():n==null?[]:[n];for(var s of r)s.call(this,e)}function cs(t,e,n){if(t==null)return e(void 0),lt;const r=ge(()=>t.subscribe(e,n));return r.unsubscribe?()=>r.unsubscribe():r}const it=[];function J(t,e=lt){let n=null;const r=new Set;function s(a){if(qr(t,a)&&(t=a,n)){const l=!it.length;for(const c of r)c[1](),it.push(c,t);if(l){for(let c=0;c<it.length;c+=2)it[c][0](it[c+1]);it.length=0}}}function i(a){s(a(t))}function o(a,l=lt){const c=[a,l];return r.add(c),r.size===1&&(n=e(s,i)||lt),a(t),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}function ne(t){let e;return cs(t,n=>e=n)(),e}let Nt=!1,Rn=Symbol();function z(t,e,n){const r=n[e]??(n[e]={store:null,source:K(void 0),unsubscribe:lt});if(r.store!==t&&!(Rn in n))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=lt;else{var s=!0;r.unsubscribe=cs(t,i=>{s?r.source.v=i:L(r.source,i)}),s=!1}return t&&Rn in n?ne(t):g(r.source)}function eo(t,e){return t.set(e),e}function to(t,e){var n=t[e];n.store!==null&&eo(n.store,n.source.v)}function $e(){const t={};function e(){zn(()=>{for(var n in t)t[n].unsubscribe();Nr(t,Rn,{enumerable:!1,value:!0})})}return[t,e]}function no(t){var e=Nt;try{return Nt=!1,[t(),Nt]}finally{Nt=e}}function Er(t){var e;return((e=t.ctx)==null?void 0:e.d)??!1}function G(t,e,n,r){var A;var s=(n&ni)!==0,i=!ft||(n&ri)!==0,o=(n&ii)!==0,a=(n&oi)!==0,l=!1,c;o?[c,l]=no(()=>t[e]):c=t[e];var d=Ge in t||Us in t,v=o&&(((A=at(t,e))==null?void 0:A.set)??(d&&e in t&&($=>t[e]=$)))||void 0,f=r,h=!0,p=!1,b=()=>(p=!0,h&&(h=!1,a?f=ge(r):f=r),f);c===void 0&&r!==void 0&&(v&&i&&Ys(),c=b(),v&&v(c));var k;if(i)k=()=>{var $=t[e];return $===void 0?b():(h=!0,p=!1,$)};else{var E=(s?wt:ct)(()=>t[e]);E.f|=Lr,k=()=>{var $=g(E);return $!==void 0&&(f=void 0),$===void 0?f:$}}if((n&si)===0)return k;if(v){var T=t.$$legacy;return function($,I){return arguments.length>0?((!i||!I||T||l)&&v(I?k():$),$):k()}}var R=!1,w=!1,x=K(c),N=wt(()=>{var $=k(),I=g(x);return R?(R=!1,w=!0,I):(w=!1,x.v=$)});return o&&g(N),s||(N.equals=Un),function($,I){if(Pe!==null&&(R=w,k(),g(x)),arguments.length>0){const X=I?g(N):i&&o?Je($):$;if(!N.equals(X)){if(R=!0,L(x,X),p&&f!==void 0&&(f=X),Er(N))return $;ge(()=>g(N))}return $}return Er(N)?N.v:g(N)}}function We(t){q===null&&Hn(),ft&&q.l!==null?us(q).m.push(t):$n(()=>{const e=ge(t);if(typeof e=="function")return e})}function Xn(t){q===null&&Hn(),We(()=>()=>ge(t))}function ro(t){q===null&&Hn(),q.l===null&&Ks(),us(q).a.push(t)}function us(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const so="5";var Cr;typeof window<"u"&&((Cr=window.__svelte??(window.__svelte={})).v??(Cr.v=new Set)).add(so);Zs();const io="#1F1F1F",oo="#F5F5F5",oe={background:io,font:oo,"default-title-background":"#5b21b6","btn-default":"#64748B","btn-default-hover":"#374151","btn-cancel":"#4B5563","btn-cancel-hover":"#374151","btn-text":"#FFFFFF"};sessionStorage.getItem("accessToken");const Gn=J(!1),Qn=J(null),Zn=J(""),er=J(""),tr=J(oe["default-title-background"]),nr=J([]),rr=J(null),sr=J(null),ao={success:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>',error:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12.5" cy="12.5" r="10"/><line x1="12.5" y1="8" x2="12.5" y2="16"/><line x1="8" y1="12.5" x2="16" y2="12.5"/></svg>',alert:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.5 9v4"/><path d="M12.5 17h.01"/><path d="M21 19H3a2 2 0 0 1-1.74-3l9-15a2 2 0 0 1 3.48 0l9 15a2 2 0 0 1-1.74 3Z"/></svg>',loading:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12.5" y1="2" x2="12.5" y2="6"/><line x1="12.5" y1="18" x2="12.5" y2="22"/><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"/><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"/><line x1="2" y1="12.5" x2="6" y2="12.5"/><line x1="18" y1="12.5" x2="22" y2="12.5"/><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"/><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"/></svg>',input:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.5 20h9"/><path d="M16.5 3.5a2.12 2.12 0 1 1 3 3L7 19l-4 1 1-4Z"/></svg>',confirm:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 11 12.5 14 22 4"/><path d="M21 12.5v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>',tips:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-badge-info-icon lucide-badge-info"><path d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"/><line x1="12" x2="12" y1="16" y2="12"/><line x1="12" x2="12.01" y1="8" y2="8"/></svg>',turn:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.5 9v4"/><path d="M12.5 17h.01"/><path d="M21 19H3a2 2 0 0 1-1.74-3l9-15a2 2 0 0 1 3.48 0l9 15a2 2 0 0 1-1.74 3Z"/></svg>'};function pe(t,e,n,r,s,i){return new Promise(o=>{Gn.set(!0),Qn.set(t??null),Zn.set(e??"제목 없음"),er.set(n),tr.set(oe["default-title-background"]),fs.set(i),nr.set((s==null?void 0:s.map(a=>({...a,value:a.value??""})))??[]),rr.set(o),sr.set(ao[t]??null),t==="success"&&setTimeout(()=>{o({success:!0}),vt()},3500)})}function vt(){Gn.set(!1),Qn.set(null),Zn.set(""),er.set(""),tr.set("#3498db"),nr.set([]),rr.set(null),sr.set(null)}const fs=J(void 0);var lo=O('<label class="label svelte-nr36af"> </label>'),co=O('<div class="input-container svelte-nr36af"><!> <input class="input-field svelte-nr36af"></div>');function uo(t,e){W(e,!1);let n=G(e,"type",8,"text"),r=G(e,"placeholder",8,""),s=G(e,"value",12,""),i=G(e,"disabled",8,!1),o=G(e,"label",8,""),a=G(e,"onEnter",8,null),l=G(e,"onCancel",8,null);function c(p){p.key==="Enter"&&a()&&a()(s()),p.key==="Escape"&&l()&&l()()}V();var d=co(),v=m(d);{var f=p=>{var b=lo(),k=m(b);C(()=>H(k,o())),S(p,b)};D(v,p=>{o()&&p(f)})}var h=_(v,2);Bi(h),C(()=>{Qt(h,"type",n()),Qt(h,"placeholder",r()),h.disabled=i()}),Zi(h,s),U("keydown",h,c),S(t,d),j()}var fo=O('<div class="circle svelte-c7erz8"></div>'),ho=O('<div class="dots svelte-c7erz8"><span class="svelte-c7erz8"></span> <span class="svelte-c7erz8"></span> <span class="svelte-c7erz8"></span></div>'),vo=O('<div class="bars svelte-c7erz8"><span class="svelte-c7erz8"></span> <span class="svelte-c7erz8"></span> <span class="svelte-c7erz8"></span></div>'),po=O('<div class="wave svelte-c7erz8"><span class="svelte-c7erz8"></span> <span class="svelte-c7erz8"></span> <span class="svelte-c7erz8"></span></div>'),_o=O('<div class="spinner-container svelte-c7erz8"><!></div>');function go(t,e){let n=G(e,"size",8,40),r=G(e,"color",8,"#3498db"),s=G(e,"type",8,"dots");var i=_o(),o=m(i);{var a=c=>{var d=fo();S(c,d)},l=(c,d)=>{{var v=h=>{var p=ho();S(h,p)},f=(h,p)=>{{var b=E=>{var T=vo();S(E,T)},k=(E,T)=>{{var R=w=>{var x=po();S(w,x)};D(E,w=>{s()==="wave"&&w(R)},T)}};D(h,E=>{s()==="bars"?E(b):E(k,!1)},p)}};D(c,h=>{s()==="dots"?h(v):h(f,!1)},d)}};D(o,c=>{s()==="circle"?c(a):c(l,!1)})}C(()=>ot(i,`--spinner-size: ${n()??""}px; --spinner-color: ${r()??""};`)),S(t,i)}var mo=O('<div class="icon svelte-18akhaf"><!></div>'),yo=O('<img class="message-image svelte-18akhaf" alt="image">'),bo=O('<button class="button btn-default svelte-18akhaf">확인</button> <button class="button btn-cancel svelte-18akhaf">취소</button>',1),wo=O('<button class="button btn-default svelte-18akhaf">확인</button>'),xo=O('<div class="footer svelte-18akhaf"><!></div>'),ko=O('<div class="message-box svelte-18akhaf"><div class="header svelte-18akhaf"><!> </div> <div class="content svelte-18akhaf"><!> <!> <p> </p> <!></div> <!></div>');function Eo(t,e){W(e,!1);const[n,r]=$e(),s=()=>z(rr,"$messageResolve",n),i=()=>z(nr,"$messageInputs",n),o=()=>z(Qn,"$messageType",n),a=()=>z(er,"$messageContent",n),l=()=>z(tr,"$messageColor",n),c=()=>z(sr,"$messageIcon",n),d=()=>z(Zn,"$messageTitle",n),v=()=>z(fs,"$imageSrc",n),f=K();function h(B){if(s()){const re={};i().forEach(Ce=>{re[Ce.key]=Ce.value??""}),s()(o()==="input"?{success:B,values:B?re:void 0}:{success:B})}vt()}function p(B){B.key==="Escape"&&h(!1),B.key==="Enter"&&(o()==="confirm"||o()==="input")&&h(!0)}function b(B){return B==="email"||B==="number"||B==="password"?B:"text"}let k=K(!0);We(()=>{window.addEventListener("keydown",p),g(E)&&g(E).focus()});let E=K();Xn(()=>{window.removeEventListener("keydown",p)}),et(()=>o(),()=>{o()==="tips"&&(L(k,!1),setTimeout(()=>{L(k,!0)},3e3))}),et(()=>(a(),i()),()=>{L(f,typeof a()=="function"?a()(Object.fromEntries(i().map(B=>[B.key,B.value]))):a())}),on(),V();var T=ko(),R=m(T),w=m(R);{var x=B=>{var re=mo(),Ce=m(re);Vi(Ce,c),S(B,re)};D(w,B=>{c()&&B(x)})}var N=_(w),A=_(R,2),$=m(A);{var I=B=>{go(B,{size:50,get color(){return l()}})};D($,B=>{(o()==="loading"||o()==="success")&&B(I)})}var X=_($,2);{var Q=B=>{var re=yo();C(()=>Qt(re,"src",v())),S(B,re)};D(X,B=>{v()&&B(Q)})}var ue=_(X,2),_t=m(ue),nt=_(ue,2);{var je=B=>{var re=Re(),Ce=le(re);me(Ce,1,i,Ee,(hn,Ve,ze)=>{const Ke=ct(()=>b(g(Ve).type));uo(hn,{get label(){return g(Ve).label},get type(){return g(Ke)},get placeholder(){return g(Ve).placeholder},get value(){return g(Ve).value},set value(Ye){g(Ve).value=Ye,Ai(()=>i()),to(n,"$messageInputs")},$$legacy:!0})}),S(B,re)};D(nt,B=>{o()==="input"&&B(je)})}var He=_(A,2);{var rt=B=>{var re=xo(),Ce=m(re);{var hn=ze=>{var Ke=bo(),Ye=le(Ke),Ot=_(Ye,2);C(()=>{ot(Ye,`--btn-default: ${oe["btn-default"]}; --btn-default-hover: ${oe["btn-default-hover"]}; --btn-text: ${oe["btn-text"]};`),ot(Ot,`--btn-cancel: ${oe["btn-cancel"]}; --btn-cancel-hover: ${oe["btn-cancel-hover"]}; --btn-text: ${oe["btn-text"]};`)}),U("click",Ye,()=>h(!0)),U("click",Ot,()=>h(!1)),S(ze,Ke)},Ve=ze=>{var Ke=Re(),Ye=le(Ke);{var Ot=vn=>{var Ct=wo();Ze(Ct,Ps=>L(E,Ps),()=>g(E)),C(()=>ot(Ct,`--btn-default: ${oe["btn-default"]}; --btn-default-hover: ${oe["btn-default-hover"]}; --btn-text: ${oe["btn-text"]};`)),U("click",Ct,()=>h(!0)),S(vn,Ct)};D(Ye,vn=>{(o()!=="tips"||g(k))&&vn(Ot)})}S(ze,Ke)};D(Ce,ze=>{o()==="confirm"||o()==="input"?ze(hn):ze(Ve,!1)})}S(B,re)};D(He,B=>{o()!=="loading"&&o()!=="success"&&B(rt)})}C(()=>{ot(T,`background: ${oe.background}; color: ${oe.font}`),ot(R,`background: ${l()??""}`),H(N,` ${d()??""}`),H(_t,g(f))}),S(t,T),j(),r()}var So=O('<div class="overlay svelte-sraiso"><!></div>');function $o(t){const[e,n]=$e(),r=()=>z(Gn,"$isOpen",e);var s=Re(),i=le(s);{var o=a=>{var l=So(),c=m(l);Eo(c,{}),S(a,l)};D(i,a=>{r()&&a(o)})}S(t,s),n()}const ce=J("login"),ds=J(1),Le=J("lobby"),ye=J(null),u={bgSecondary:"bg-gray-900",bgTertiary:"bg-gray-800",bgAccent:"bg-purple-800",bgAccentHover:"bg-purple-700",bgAccentPrimary:"bg-purple-600",bgWarning:"bg-red-800",bgDisabled:"bg-gray-700",borderPrimary:"border-gray-700",textPrimary:"text-gray-300",textSecondary:"text-gray-400",textTertiary:"text-gray-500",textAccentStrong:"text-purple-600",textWarning:"text-red-300",textWhite:"text-white",focusRing:"focus:ring-2 focus:ring-purple-300",transition:"transition",roundedDefault:"rounded-lg",shadow:"shadow-md"};var To=O("<p> </p>"),Ao=O("<li> </li>"),Ro=O('<div class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50"><div><h2 class="text-lg font-bold mb-3">📝 구역 낙서 전체 보기</h2> <ul class="space-y-1 text-md"></ul> <button>닫기</button></div></div>'),Oo=O('<div><span>자책하는 두더지 - 생존자</span> <div class="flex justify-between items-center mb-1"><span class="text-md font-semibold"></span> <span><span></span>턴 진행중 <span></span>초 남음</span></div> <div class="text-sm space-y-0.5 cursor-pointer"><!> <p>+ 전체 메세지 보기</p></div></div> <!>',1);function Co(t,e){W(e,!1);let n=K(),r=[""],s=K(!1);V();var i=Oo(),o=le(i),a=m(o),l=_(a,2),c=m(l);c.textContent="현재 구역:  ";var d=_(c,2),v=m(d);v.textContent=1;var f=_(v,2);f.textContent=90;var h=_(l,2),p=m(h);me(p,1,()=>r.slice(0,3),Ee,(T,R)=>{var w=To(),x=m(w);C(()=>{y(w,1,`truncate ${g(R)==="지워진 낙서"?u.textTertiary:null}`),H(x,`• ${g(R)??""}`)}),S(T,w)});var b=_(p,2);Ze(o,T=>L(n,T),()=>g(n));var k=_(o,2);{var E=T=>{var R=Ro(),w=m(R),x=_(m(w),2);me(x,5,()=>r,Ee,(A,$)=>{var I=Ao(),X=m(I);C(()=>{y(I,1,`break-words whitespace-pre-wrap ${g($)==="지워진 낙서"?u.textTertiary:null}`),H(X,`• ${g($)??""}`)}),S(A,I)});var N=_(x,2);C(()=>{y(w,1,`w-80 max-h-[80vh] overflow-y-auto p-4 ${u.bgTertiary} ${u.textWhite} ${u.roundedDefault}`),y(N,1,`mt-4 w-full py-2 ${u.bgDisabled} ${u.textWhite} ${u.roundedDefault}`)}),U("click",N,()=>L(s,!1)),U("click",w,as(function(A){ls.call(this,e,A)})),U("click",R,()=>L(s,!1)),S(T,R)};D(k,T=>{g(s)&&T(E)})}C(()=>{y(o,1,`${u.bgSecondary} ${u.textPrimary} p-3 border-b ${u.borderPrimary}`),y(a,1,`text-lg font-bold ${u.textWarning}`),y(d,1,`text-md ${u.textPrimary}`),y(v,1,$t(u.textWarning)),y(f,1,$t(u.textAccentStrong)),y(b,1,`text-right underline ${u.textWarning}`)}),U("click",h,()=>L(s,!0)),S(t,i),j()}var No=O("<li> </li>"),Bo=O('<div class="hidden md:block p-2"><h2 class="text-lg font-bold mb-2">👥 생존자 정보</h2> <ul class="space-y-1 text-sm"></ul></div>'),Po=O("<li> </li>"),Lo=O('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div><h2 class="text-lg font-bold mb-2">👥 생존자 정보</h2> <ul class="space-y-1 text-sm"></ul> <button>닫기</button></div></div>');function Sr(t,e){W(e,!1);let n=G(e,"isOpen",8,!1),r=G(e,"alwaysVisible",8,!1),s=G(e,"onClose",8,()=>{}),i=K(),o=[];function a(f){let h="";return f.status==="you"&&(h=u.textWarning),f.status==="dead"&&(h="line-through"),f.sameRegion||(h=h+` ${u.textTertiary} italic`),f.status==="zombie"&&f.sameRegion&&(h=u.textAccentStrong),h===""&&(h=u.textPrimary),h}V();var l=Re(),c=le(l);{var d=f=>{var h=Bo(),p=_(m(h),2);me(p,5,()=>o,Ee,(b,k)=>{var E=No(),T=m(E);C(R=>{y(E,1,R),H(T,`${g(k).name??""} (${g(k).status??""})`)},[()=>$t(a(g(k)))],ct),S(b,E)}),Ze(h,b=>L(i,b),()=>g(i)),S(f,h)},v=(f,h)=>{{var p=b=>{var k=Lo(),E=m(k),T=_(m(E),2);me(T,5,()=>o,Ee,(w,x)=>{var N=Po(),A=m(N);C($=>{y(N,1,$),H(A,`${g(x).name??""} (${g(x).status??""})`)},[()=>$t(a(g(x)))],ct),S(w,N)});var R=_(T,2);C(()=>{y(E,1,`w-72 p-4 ${u.bgTertiary} ${u.textWhite} ${u.roundedDefault} ${u.shadow}`),y(R,1,`mt-4 w-full py-2 ${u.bgDisabled} ${u.textWhite} ${u.roundedDefault}`)}),U("click",R,function(...w){var x;(x=s())==null||x.apply(this,w)}),U("click",E,as(function(w){ls.call(this,e,w)})),U("click",k,function(...w){var x;(x=s())==null||x.apply(this,w)}),S(b,k)};D(f,b=>{n()&&b(p)},h)}};D(c,f=>{r()?f(d):f(v,!1)})}S(t,l),j()}var Io=O("<div> </div>"),Do=O("<div></div>");function qo(t,e){W(e,!1);let n=G(e,"messages",24,()=>[]),r=K();ro(()=>{var i;(i=g(r))==null||i.scrollTo({top:g(r).scrollHeight,behavior:"smooth"})}),V();var s=Do();me(s,5,n,Ee,(i,o)=>{var a=Io(),l=m(a);C(()=>{y(a,1,$t(g(o).system?u.textWarning:u.textPrimary),"svelte-67k4d1"),H(l,g(o).content)}),S(i,a)}),Ze(s,i=>L(r,i),()=>g(r)),C(()=>y(s,1,`rounded-xl flex-1 overflow-y-auto p-4 space-y-2 chat-log ${u.bgTertiary} ${u.textPrimary}`,"svelte-67k4d1")),S(t,s),j()}var Mo=O('<div><input> <button type="button">전송</button></div>');function Fo(t,e){W(e,!1),V();var n=Mo(),r=m(n),s=_(r,2);C(()=>{y(n,1,`flex items-center p-2 border-t ${u.borderPrimary} ${u.bgSecondary}`),y(r,1,`flex-1 mr-2 px-3 py-1 ${u.roundedDefault} ${u.bgDisabled} ${u.textWhite} focus:outline-none ${u.focusRing}`),y(s,1,`px-4 py-1 ${u.bgWarning} ${u.textWhite} ${u.roundedDefault}`)}),S(t,n),j()}const yt=J(null);function Uo(t,e,n){return new Promise((r,s)=>{yt.set({title:t,message:e,options:n,resolve:r,reject:s})})}var Wo=O('<div class="flex items-center justify-between bg-gray-700 p-2 rounded"><div class="text-white font-medium"> </div> <div class="flex gap-1"><button>안내</button> <button>사용</button> <button>주기</button></div></div>'),jo=O('<div class="pl-6 mt-1 space-y-1 text-sm flex flex-col"></div>'),Ho=O('<div class="flex flex-col gap-y-2"><div><button class="w-full text-left px-4 py-2 font-semibold">🎒 가방</button> <!></div> <div><button class="w-full text-left px-4 py-2 font-semibold">🧭 행동</button> <div class="pl-6 mt-1 space-y-1 text-sm flex flex-col"><button>다음 턴 이동 장소 설정</button> <button>좀비 대처 행동</button> <button>감염시키기(숙주 전용)</button> <button>좀비의 공격 대상 정하기(숙주 전용)</button> <button>좀비의 이동 구역 정하기(숙주 전용)</button></div> <div class="mt-4"><button class="w-full text-left px-4 py-2 font-semibold">⏭️ 넘기기</button> <button>🚪 나가기</button></div></div></div>');function Vo(t,e){W(e,!1);let n=[{name:""}],r=K(),s=K(),i=K(),o=K(null);const a=A=>{L(o,g(o)===A?null:A)};async function l(){await Uo("이동지역 선택","다음 지역은 어디로 이동하시겠습니까?",[{value:"a",label:"언덕"},{value:"b",label:"폐건물"},{value:"c",label:"정글"},{value:"d",label:"해안가"},{value:"e",label:"동굴"},{value:"f",label:"개울"}])}V();var c=Ho(),d=m(c),v=_(m(d),2);{var f=A=>{var $=jo();me($,5,()=>n,Ee,(I,X)=>{var Q=Wo(),ue=m(Q),_t=m(ue),nt=_(ue,2),je=m(nt),He=_(je,2),rt=_(He,2);C(()=>{H(_t,g(X).name),y(je,1,`px-2 py-1 text-white rounded text-sm ${u.bgSecondary}`),y(He,1,`px-2 py-1 text-white rounded text-sm ${u.bgWarning}`),y(rt,1,`px-2 py-1 text-white rounded text-sm ${u.bgSecondary}`)}),S(I,Q)}),S(A,$)};D(v,A=>{g(o)==="inventory"&&A(f)})}Ze(d,A=>L(r,A),()=>g(r));var h=_(d,2),p=m(h);Ze(p,A=>L(s,A),()=>g(s));var b=_(p,2),k=m(b),E=_(k,2),T=_(E,2),R=_(T,2),w=_(R,2),x=_(b,2),N=_(m(x),2);Ze(x,A=>L(i,A),()=>g(i)),C(()=>{y(k,1,`block w-full py-2 rounded ${u.bgWarning}`),y(E,1,`block w-full py-2 rounded ${u.bgDisabled}`),y(T,1,`block w-full py-2 rounded ${u.bgDisabled}`),y(R,1,`block w-full py-2 rounded ${u.bgDisabled}`),y(w,1,`block w-full py-2 rounded ${u.bgDisabled}`),y(N,1,`w-full $${u.textWarning} text-left px-4 py-2 font-semibold`)}),U("click",p,()=>a("action")),U("click",k,()=>l()),S(t,c),j()}var zo=O('<nav class="md:hidden fixed bottom-0 left-0 right-0 z-50 flex justify-around items-center h-14"><button class="h-full flex flex-col justify-center items-center text-lg">🎒<br>가방</button> <button class="h-full flex flex-col justify-center items-center text-lg">🧭<br>행동</button> <button class="h-full flex flex-col justify-center items-center text-lg ">👥<br>생존자</button> <button class="h-full flex flex-col justify-center items-center text-lg ">⏭️<br>넘기기</button> <button class="h-full flex flex-col justify-center items-center text-lg ">🚪<br>나가기</button></nav>');function Ko(t){var e=zo();S(t,e)}function Yo(t,e){W(e,!1);const[n,r]=$e(),s=()=>z(i,"$isMobile",n),i=J(!1);We(()=>{const d=()=>i.set(window.innerWidth<768);return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)}),V();var o=Re(),a=le(o);{var l=d=>{Ko(d)},c=d=>{Vo(d,{})};D(a,d=>{s()?d(l):d(c,!1)})}S(t,o),j(),r()}function Jo(t,e){W(e,!1),V();var n=Re(),r=le(n);D(r,s=>{}),S(t,n),j()}var Xo=O('<div class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50"><div><h2 class="text-lg text-red-400 mb-2">🧭 행동 선택</h2> <div class="space-y-2"><button>다음 턴 이동 장소 설정</button> <button>좀비 대처 행동</button> <button>감염시키기</button> <button>좀비의 공격 대상 정하기</button> <button>좀비의 이동 구역 정하기</button></div> <button>닫기</button></div></div>');function Go(t,e){W(e,!1),V();var n=Xo(),r=m(n),s=_(m(r),2),i=m(s),o=_(i,2),a=_(o,2),l=_(a,2),c=_(l,2),d=_(s,2);C(()=>{y(r,1,`${u.bgTertiary} p-4 rounded-lg w-3/4 max-w-md shadow-md`),y(i,1,`block w-full py-2 rounded ${u.bgWarning}`),y(o,1,`block w-full py-2 rounded ${u.bgDisabled}`),y(a,1,`block w-full py-2 rounded ${u.bgDisabled}`),y(l,1,`block w-full py-2 rounded ${u.bgDisabled}`),y(c,1,`block w-full py-2 rounded ${u.bgDisabled}`),y(d,1,`mt-4 px-3 py-1 text-white rounded ${u.bgSecondary}`)}),S(t,n),j()}const Bt=J(null);var Qo=O('<img class="message-image svelte-v5y3jd" alt="image">'),Zo=O("<li><button> </button></li>"),ea=O('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"><div><h2 class="text-xl font-bold mb-2"> </h2> <p class="mb-4 text-sm"> </p> <ul class="space-y-2 mb-4"><!> <!></ul> <button>취소</button></div></div>');function ta(t,e){W(e,!1);const[n,r]=$e(),s=()=>z(Bt,"$selectPlayerStore",n),i=K();let o=K(ne(Bt));et(()=>s(),()=>{L(i,!!s())}),et(()=>s(),()=>{L(o,s())}),on(),V();var a=Re(),l=le(a);{var c=d=>{var v=ea(),f=m(v),h=m(f),p=m(h),b=_(h,2),k=m(b),E=_(b,2),T=m(E);{var R=N=>{var A=Qo();C(()=>Qt(A,"src",g(o).image)),S(N,A)};D(T,N=>{g(o).image&&N(R)})}var w=_(T,2);me(w,1,()=>g(o).players,Ee,(N,A)=>{var $=Zo(),I=m($),X=m(I);C(()=>{y(I,1,`w-full py-2 px-4 rounded-xl shadow ${u.bgTertiary} hover:${u.bgAccent} transition-colors`,"svelte-v5y3jd"),H(X,g(A).name)}),U("click",I,()=>{g(o).resolve(g(A)),Bt.set(null)}),S(N,$)});var x=_(E,2);C(()=>{y(f,1,`w-full max-w-md mx-4 p-6 rounded-2xl shadow-xl ${u.bgSecondary} ${u.textPrimary}`,"svelte-v5y3jd"),H(p,g(o).title),H(k,g(o).message),y(x,1,`w-full py-2 px-4 rounded-xl border mt-2 ${u.textWarning} border-${u.bgWarning}`,"svelte-v5y3jd")}),U("click",x,()=>{g(o).reject(),Bt.set(null)}),S(d,v)};D(l,d=>{g(i)&&g(o)&&d(c)})}S(t,a),j(),r()}var na=O("<li><button> </button></li>"),ra=O('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"><div><h2 class="text-xl font-bold mb-2"> </h2> <p class="mb-4 text-sm"> </p> <ul class="space-y-2 mb-4"></ul> <button>취소</button></div></div>');function sa(t,e){W(e,!1);const[n,r]=$e(),s=()=>z(yt,"$selectOptionStore",n),i=K();let o=K(ne(yt));et(()=>s(),()=>{L(i,!!s())}),et(()=>s(),()=>{L(o,s())}),on(),V();var a=Re(),l=le(a);{var c=d=>{var v=ra(),f=m(v),h=m(f),p=m(h),b=_(h,2),k=m(b),E=_(b,2);me(E,5,()=>g(o).options,Ee,(R,w)=>{var x=na(),N=m(x),A=m(N);C(()=>{y(N,1,`w-full py-2 px-4 rounded-xl shadow ${u.bgTertiary} hover:${u.bgWarning} transition-colors`),H(A,g(w).label)}),U("click",N,()=>{g(o).resolve(g(w)),yt.set(null)}),S(R,x)});var T=_(E,2);C(()=>{y(f,1,`w-full max-w-md mx-4 p-6 rounded-2xl shadow-xl ${u.bgSecondary} ${u.textPrimary}`),H(p,g(o).title),H(k,g(o).message),y(T,1,`w-full py-2 px-4 rounded-xl border mt-2 ${u.textWarning} border-${u.bgWarning}`)}),U("click",T,()=>{g(o).reject(),yt.set(null)}),S(d,v)};D(l,d=>{g(i)&&g(o)&&d(c)})}S(t,a),j(),r()}var ia=O('<!> <!> <div><!> <!> <main class="flex-1 flex flex-col gap-y-4 pb-14"><!> <!> <!></main> <!> <!> <!></div>',1);function oa(t,e){W(e,!1);let n=K(!1);V();var r=ia(),s=le(r);ta(s,{});var i=_(s,2);sa(i,{});var o=_(i,2),a=m(o);Sr(a,{alwaysVisible:!0});var l=_(a,2);Sr(l,{get isOpen(){return g(n)},onClose:()=>L(n,!1)});var c=_(l,2),d=m(c);Co(d,{});var v=_(d,2);qo(v,{});var f=_(v,2);Fo(f,{});var h=_(c,2);Yo(h,{});var p=_(h,2);Jo(p,{});var b=_(p,2);Go(b,{}),C(()=>y(o,1,`flex flex-col md:flex-row min-h-screen px-6 py-4 gap-x-6 ${u.bgSecondary} ${u.textPrimary}`,"svelte-67k4d1")),S(t,r),j()}var aa=O('<footer class="text-xs text-center mt-12"><p>© 2025 The Host. All rights reserved.</p></footer>');function la(t,e){W(e,!1),V();var n=aa(),r=m(n);C(()=>y(r,1,`${u.textTertiary}`)),S(t,n),j()}async function hs(t){if(t.ok)return!0;{const e=await t.json();return pe("error","오류 발생",e.message),!1}}function vs(t){pe("error","오류 발생",t)}const ps={isLoggedIn:!1,isLoading:!1,token:null,user:null,error:null},tt=J({...ps});function Zt(t,e){sessionStorage.setItem("accessToken",e),tt.set({isLoggedIn:!0,isLoading:!1,token:e,user:t,error:null})}function ir(){sessionStorage.removeItem("accessToken"),tt.set({...ps})}async function ca(){const t=sessionStorage.getItem("accessToken");let e;if(t)e=await _s(t);else{const n=await ua();return n||null}return e}async function _s(t){try{const e=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw new Error("유효하지 않은 토큰");const n=await e.json();return Zt({id:n.id,nickname:n.nickname},t),ne(ce)==="login"&&ce.set("lobby"),!0}catch{return ir(),!1}}async function ua(){try{const t=await fetch("/api/auth/refresh",{method:"POST"});if(!t.ok)throw new Error("유효하지 않은 토큰");const e=await t.json();return Zt({id:e.user.id,nickname:e.user.nickname},e.token),_s(e.token),!0}catch{return ir(),!1}}async function mn(){try{const t=await fetch("/api/auth/logout",{method:"POST",credentials:"include"});if(!await hs(t))return;pe("success","로그아웃 성공","로그아웃에 성공하였습니다"),ir(),ce.set("login")}catch(t){vs(t)}}var fa=O('<div class="flex items-center space-x-2"><span> </span> <button>로그아웃</button></div>'),da=O('<header class="w-full max-w-4xl flex items-center justify-between mb-8"><div class="flex items-center space-x-3"><img src="/img/logo.png" class="w-12 h-12 object-contain" alt="로고"> <h1>THE HOST</h1></div> <!></header>');function ha(t,e){W(e,!1);const[n,r]=$e(),s=()=>z(tt,"$authStore",n),i=K();et(()=>s(),()=>{L(i,s())}),on(),V();var o=da(),a=m(o),l=_(m(a),2),c=_(a,2);{var d=v=>{var f=fa(),h=m(f),p=m(h),b=_(h,2);C(()=>{var k;y(h,1,`${u.textPrimary} text-sm`),H(p,`${((k=g(i).user)==null?void 0:k.nickname)??""} 님 환영합니다`),y(b,1,`${u.textSecondary} text-xs underline hover:${u.textAccentStrong}`)}),U("click",b,function(...k){mn==null||mn.apply(this,k)}),S(v,f)};D(c,v=>{g(i).isLoggedIn&&v(d)})}C(()=>y(l,1,`${u.textWhite} text-2xl font-bold`)),S(t,o),j(),r()}const Se=Object.create(null);Se.open="0";Se.close="1";Se.ping="2";Se.pong="3";Se.message="4";Se.upgrade="5";Se.noop="6";const Mt=Object.create(null);Object.keys(Se).forEach(t=>{Mt[Se[t]]=t});const On={type:"error",data:"parser error"},gs=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ms=typeof ArrayBuffer=="function",ys=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,or=({type:t,data:e},n,r)=>gs&&e instanceof Blob?n?r(e):$r(e,r):ms&&(e instanceof ArrayBuffer||ys(e))?n?r(e):$r(new Blob([e]),r):r(Se[t]+(e||"")),$r=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Tr(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let yn;function va(t,e){if(gs&&t.data instanceof Blob)return t.data.arrayBuffer().then(Tr).then(e);if(ms&&(t.data instanceof ArrayBuffer||ys(t.data)))return e(Tr(t.data));or(t,!1,n=>{yn||(yn=new TextEncoder),e(yn.encode(n))})}const Ar="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Ar.length;t++)bt[Ar.charCodeAt(t)]=t;const pa=t=>{let e=t.length*.75,n=t.length,r,s=0,i,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),d=new Uint8Array(c);for(r=0;r<n;r+=4)i=bt[t.charCodeAt(r)],o=bt[t.charCodeAt(r+1)],a=bt[t.charCodeAt(r+2)],l=bt[t.charCodeAt(r+3)],d[s++]=i<<2|o>>4,d[s++]=(o&15)<<4|a>>2,d[s++]=(a&3)<<6|l&63;return c},_a=typeof ArrayBuffer=="function",ar=(t,e)=>{if(typeof t!="string")return{type:"message",data:bs(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:ga(t.substring(1),e)}:Mt[n]?t.length>1?{type:Mt[n],data:t.substring(1)}:{type:Mt[n]}:On},ga=(t,e)=>{if(_a){const n=pa(t);return bs(n,e)}else return{base64:!0,data:t}},bs=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},ws="",ma=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((i,o)=>{or(i,!1,a=>{r[o]=a,++s===n&&e(r.join(ws))})})},ya=(t,e)=>{const n=t.split(ws),r=[];for(let s=0;s<n.length;s++){const i=ar(n[s],e);if(r.push(i),i.type==="error")break}return r};function ba(){return new TransformStream({transform(t,e){va(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let bn;function Pt(t){return t.reduce((e,n)=>e+n.length,0)}function Lt(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function wa(t,e){bn||(bn=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(Pt(n)<1)break;const l=Lt(n,1);i=(l[0]&128)===128,s=l[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Pt(n)<2)break;const l=Lt(n,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(Pt(n)<8)break;const l=Lt(n,8),c=new DataView(l.buffer,l.byteOffset,l.length),d=c.getUint32(0);if(d>Math.pow(2,21)-1){a.enqueue(On);break}s=d*Math.pow(2,32)+c.getUint32(4),r=3}else{if(Pt(n)<s)break;const l=Lt(n,s);a.enqueue(ar(i?l:bn.decode(l),e)),r=0}if(s===0||s>t){a.enqueue(On);break}}}})}const xs=4;function Y(t){if(t)return xa(t)}function xa(t){for(var e in Y.prototype)t[e]=Y.prototype[e];return t}Y.prototype.on=Y.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Y.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Y.prototype.off=Y.prototype.removeListener=Y.prototype.removeAllListeners=Y.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Y.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};Y.prototype.emitReserved=Y.prototype.emit;Y.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Y.prototype.hasListeners=function(t){return!!this.listeners(t).length};const fn=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),de=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ka="arraybuffer";function ks(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const Ea=de.setTimeout,Sa=de.clearTimeout;function dn(t,e){e.useNativeTimers?(t.setTimeoutFn=Ea.bind(de),t.clearTimeoutFn=Sa.bind(de)):(t.setTimeoutFn=de.setTimeout.bind(de),t.clearTimeoutFn=de.clearTimeout.bind(de))}const $a=1.33;function Ta(t){return typeof t=="string"?Aa(t):Math.ceil((t.byteLength||t.size)*$a)}function Aa(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Es(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ra(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Oa(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class Ca extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class lr extends Y{constructor(e){super(),this.writable=!1,dn(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new Ca(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=ar(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Ra(e);return n.length?"?"+n:""}}class Na extends lr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};ya(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,ma(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Es()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Ss=!1;try{Ss=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ba=Ss;function Pa(){}class La extends Na{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class we extends Y{constructor(e,n,r){super(),this.createRequest=e,dn(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=ks(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=we.requestsCount++,we.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Pa,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete we.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}we.requestsCount=0;we.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Rr);else if(typeof addEventListener=="function"){const t="onpagehide"in de?"pagehide":"unload";addEventListener(t,Rr,!1)}}function Rr(){for(let t in we.requests)we.requests.hasOwnProperty(t)&&we.requests[t].abort()}const Ia=function(){const t=$s({xdomain:!1});return t&&t.responseType!==null}();class Da extends La{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Ia&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new we($s,this.uri(),e)}}function $s(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Ba))return new XMLHttpRequest}catch{}if(!e)try{return new de[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ts=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class qa extends lr{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=Ts?{}:ks(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;or(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&fn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Es()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const wn=de.WebSocket||de.MozWebSocket;class Ma extends qa{createSocket(e,n,r){return Ts?new wn(e,n,r):n?new wn(e,n):new wn(e)}doWrite(e,n){this.ws.send(n)}}class Fa extends lr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=wa(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=ba();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),i())}).catch(a=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&fn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Ua={websocket:Ma,webtransport:Fa,polling:Da},Wa=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ja=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Cn(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=Wa.exec(t||""),i={},o=14;for(;o--;)i[ja[o]]=s[o]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Ha(i,i.path),i.queryKey=Va(i,i.query),i}function Ha(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Va(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const Nn=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ft=[];Nn&&addEventListener("offline",()=>{Ft.forEach(t=>t())},!1);class qe extends Y{constructor(e,n){if(super(),this.binaryType=ka,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=Cn(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Cn(n.host).host);dn(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Oa(this.opts.query)),Nn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ft.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=xs,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&qe.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",qe.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=Ta(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,fn(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(qe.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Nn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Ft.indexOf(this._offlineEventListener);r!==-1&&Ft.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}qe.protocol=xs;class za extends qe{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;qe.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",v=>{if(!r)if(v.type==="pong"&&v.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;qe.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function i(){r||(r=!0,d(),n.close(),n=null)}const o=v=>{const f=new Error("probe error: "+v);f.transport=n.name,i(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function l(){o("socket closed")}function c(v){n&&v.name!==n.name&&i()}const d=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",s),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let Ka=class extends za{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>Ua[s]).filter(s=>!!s)),super(e,r)}};function Ya(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Cn(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const Ja=typeof ArrayBuffer=="function",Xa=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,As=Object.prototype.toString,Ga=typeof Blob=="function"||typeof Blob<"u"&&As.call(Blob)==="[object BlobConstructor]",Qa=typeof File=="function"||typeof File<"u"&&As.call(File)==="[object FileConstructor]";function cr(t){return Ja&&(t instanceof ArrayBuffer||Xa(t))||Ga&&t instanceof Blob||Qa&&t instanceof File}function Ut(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Ut(t[n]))return!0;return!1}if(cr(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ut(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Ut(t[n]))return!0;return!1}function Za(t){const e=[],n=t.data,r=t;return r.data=Bn(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Bn(t,e){if(!t)return t;if(cr(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Bn(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=Bn(t[r],e));return n}return t}function el(t,e){return t.data=Pn(t.data,e),delete t.attachments,t}function Pn(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Pn(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Pn(t[n],e));return t}const tl=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],nl=5;var P;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(P||(P={}));class rl{constructor(e){this.replacer=e}encode(e){return(e.type===P.EVENT||e.type===P.ACK)&&Ut(e)?this.encodeAsBinary({type:e.type===P.EVENT?P.BINARY_EVENT:P.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===P.BINARY_EVENT||e.type===P.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Za(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function Or(t){return Object.prototype.toString.call(t)==="[object Object]"}class ur extends Y{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===P.BINARY_EVENT;r||n.type===P.BINARY_ACK?(n.type=r?P.EVENT:P.ACK,this.reconstructor=new sl(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(cr(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(P[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===P.BINARY_EVENT||r.type===P.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(i,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(ur.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case P.CONNECT:return Or(n);case P.DISCONNECT:return n===void 0;case P.CONNECT_ERROR:return typeof n=="string"||Or(n);case P.EVENT:case P.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&tl.indexOf(n[0])===-1);case P.ACK:case P.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class sl{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=el(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const il=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ur,Encoder:rl,get PacketType(){return P},protocol:nl},Symbol.toStringTag,{value:"Module"}));function _e(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const ol=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Rs extends Y{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[_e(e,"open",this.onopen.bind(this)),_e(e,"packet",this.onpacket.bind(this)),_e(e,"error",this.onerror.bind(this)),_e(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(ol.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:P.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,v=n.pop();this._registerAckCallback(d,v),o.id=d}const a=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},s),o=(...a)=>{this.io.clearTimeoutFn(i),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,s)=>{const i=(o,a)=>o?s(o):r(a);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:P.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case P.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case P.EVENT:case P.BINARY_EVENT:this.onevent(e);break;case P.ACK:case P.BINARY_ACK:this.onack(e);break;case P.DISCONNECT:this.ondisconnect();break;case P.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:P.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:P.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function pt(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}pt.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};pt.prototype.reset=function(){this.attempts=0};pt.prototype.setMin=function(t){this.ms=t};pt.prototype.setMax=function(t){this.max=t};pt.prototype.setJitter=function(t){this.jitter=t};class Ln extends Y{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,dn(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new pt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||il;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Ka(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=_e(n,"open",function(){r.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=_e(n,"error",i);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(_e(e,"ping",this.onping.bind(this)),_e(e,"data",this.ondata.bind(this)),_e(e,"error",this.onerror.bind(this)),_e(e,"close",this.onclose.bind(this)),_e(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){fn(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Rs(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const gt={};function Wt(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Ya(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,o=gt[s]&&i in gt[s].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new Ln(r,e):(gt[s]||(gt[s]=new Ln(r,e)),l=gt[s]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(Wt,{Manager:Ln,Socket:Rs,io:Wt,connect:Wt});const al=window.location.protocol==="https:"?"wss":"ws",ll=window.location.host,cl=`${al}://${ll}`;let It=0;const en=J(null),ul=J(null);function fr(){return new Promise((t,e)=>{const n=ne(tt).token;if(!n)return e(new Error("토큰 없음: 소켓 연결 불가"));const r=fl(n);dl(r,t,e),hl(r),en.set(r)})}function fl(t){return Wt(cl,{auth:{token:t},transports:["websocket"],reconnection:!1})}function dl(t,e,n){t.on("connect",()=>{console.log("✅ Socket.IO 연결됨"),It=0,e()}),t.on("disconnect",()=>{if(console.warn("❌ Socket.IO 연결 종료됨"),en.set(null),pe("loading","연결 끊어짐","재연결을 시도합니다"),It<10){const r=Math.min(5e3,1e3+It*1e3);setTimeout(()=>{It++,fr().catch(console.error)},r)}else pe("error","연결 실패","서버와 연결할 수 없습니다.")}),t.on("connect_error",r=>{console.error("❗ Socket.IO 연결 오류:",r.message),n(r)})}function hl(t){t.off("update:location:restore"),t.on("update:location:restore",({state:e,roomInfo:n,roomId:r})=>{console.log("📍 복원 위치:",e,r,n),Le.set(e),r&&n&&ye.set(n),ce.set(n?e:"lobby")}),t.on("message",e=>{console.log("📩 메시지 수신:",e)}),t.emit("request:location:restore")}async function Te(t=5e3){let e=ne(en);return e!=null&&e.connected?e:new Promise((n,r)=>{const s=Date.now(),i=en.subscribe(a=>{e=a,a!=null&&a.connected&&(i(),n(a))}),o=setInterval(()=>{e!=null&&e.connected?(clearInterval(o),i(),n(e)):Date.now()-s>t&&(clearInterval(o),i(),r(new Error("⛔ 소켓이 초기화되지 않았습니다.")),fr())},50)})}const In=J([]);async function Os(t=1){const e=await Te(),n=new Promise((r,s)=>{e.timeout(5e3).emit("request:room:list",{page:t},(i,o)=>{if(i)return s(i);r(o)})});return In.set(await n),n}async function vl(){const t=await Te();t.off("update:room:list"),t.on("update:room:list",async()=>await Os(ne(ds)))}async function pl(t){const e=await Te();e.emit("request:location:update",{locationState:"room",roomId:t}),e.emit("request:room:join",{roomId:t},n=>{if(!n){pe("error","방 입장 실패","해당 방에 입장할 수 없습니다.");return}Cs(n)})}async function xn(){var n;const t=await pe("input","방 생성하기","방 이름을 지정해주세요",void 0,[{key:"name",label:" ",placeholder:"방 제목 입력"}]);if(!t.success)return;const e=((n=t.values)==null?void 0:n.name)||"빠른 게임방";await _l(e)}async function _l(t){const e=await Te();e.off("update:room:data"),e.on("update:room:data",Cs),e.emit("request:room:create",{name:t})}function Cs(t){ye.set(t),Le.set("room"),ce.set("room")}var gl=O('<main><h2>로비</h2> <p>방을 만들거나 참가하여 게임을 시작하세요.</p> <div class="flex flex-col sm:flex-row gap-4"><button>방 만들기</button> <button>방 검색하기</button></div> <div class="pt-2 flex flex-col sm:flex-row gap-4"><button>빠른 게임</button> <button>순위 게임</button></div></main>');function ml(t,e){W(e,!1),V();var n=gl(),r=m(n),s=_(r,2),i=_(s,2),o=m(i),a=_(o,2),l=_(i,2),c=m(l),d=_(c,2);C(()=>{y(n,1,`w-full max-w-3xl ${u.bgTertiary} ${u.roundedDefault} ${u.shadow} p-6`),y(r,1,`${u.textAccentStrong} text-xl font-semibold mb-4`),y(s,1,`${u.textSecondary} mb-6`),y(o,1,`
              ${u.bgAccentPrimary} hover:${u.bgAccentHover}
              ${u.textWhite} ${u.roundedDefault}
              ${u.transition} ${u.shadow}
              w-full sm:w-1/2 py-3 font-semibold text-center
            `),y(a,1,`
              ${u.bgDisabled} hover:${u.bgTertiary}
              ${u.textWhite} ${u.roundedDefault}
              ${u.transition} ${u.shadow}
              w-full sm:w-1/2 py-3 font-semibold text-center
            `),y(c,1,`
              ${u.bgDisabled} hover:${u.bgTertiary}
              ${u.textWhite} ${u.roundedDefault}
              ${u.transition} ${u.shadow}
              w-full sm:w-1/2 py-3 font-semibold text-center
            `),y(d,1,`
                ${u.bgDisabled} hover:${u.bgTertiary}
                ${u.textWhite} ${u.roundedDefault}
                ${u.transition} ${u.shadow}
                w-full sm:w-1/2 py-3 font-semibold text-center
              `)}),U("click",o,function(...v){xn==null||xn.apply(this,v)}),S(t,n),j()}var yl=O("<div>현재 참여 가능한 방이 없습니다.</div>"),bl=O("<div><div><p> </p> <p> </p></div> <button>참가</button></div>"),wl=O('<div class="mt-8 w-full max-w-3xl space-y-3"><!></div>');function xl(t,e){W(e,!1);const[n,r]=$e(),s=()=>z(ds,"$lobbyPage",n),i=()=>z(ce,"$pageStore",n),o=()=>z(ul,"$roomId",n),a=()=>z(Le,"$locationState",n),l=()=>z(In,"$rooms",n);We(async()=>{await Te(),await vl(),await Os(s()),await c(),setTimeout(()=>{console.log("🧪 get(rooms):",ne(In))},1e3)});async function c(){i()!=="room"&&i()!=="game"&&o()!==null?(Le.set("lobby"),ye.set(null)):i()==="room"&&o()!==null?Le.set("room"):i()==="game"&&o()!==null?Le.set("game"):a()!=="lobby"&&o()!==null&&(Le.set("lobby"),ce.set("lobby"),pe("error","방 정보 오류","방 정보가 없어 로비로 이동합니다"))}V();var d=wl(),v=m(d);{var f=p=>{var b=yl();C(()=>y(b,1,`${u.textSecondary} text-sm text-center py-6`)),S(p,b)},h=p=>{var b=Re(),k=le(b);me(k,1,l,E=>E.id,(E,T)=>{var R=bl(),w=m(R),x=m(w),N=m(x),A=_(x,2),$=m(A),I=_(w,2);C(()=>{y(R,1,`flex items-center justify-between px-4 py-3 ${u.bgSecondary} ${u.roundedDefault} ${u.shadow} hover:${u.bgTertiary} transition`),y(x,1,`${u.textWhite} font-medium`),H(N,g(T).id),y(A,1,`${u.textTertiary} text-sm`),H($,`인원: ${g(T).players.length??""} / 20`),y(I,1,`${u.textAccentStrong} text-sm underline hover:font-semibold`)}),U("click",I,()=>pl(g(T).id)),S(E,R)}),S(p,b)};D(v,p=>{l().length===0?p(f):p(h,!1)})}S(t,d),j(),r()}var kl=O("<div><!> <!> <!> <!></div>");function El(t,e){W(e,!1),We(async()=>{fr()}),V();var n=kl(),r=m(n);ha(r,{});var s=_(r,2);ml(s,{});var i=_(s,2);xl(i,{});var o=_(i,2);la(o,{}),C(()=>y(n,1,`min-h-screen p-6 ${u.bgSecondary} flex flex-col items-center justify-start`)),S(t,n),j()}var Sl=O(`<div class="bg-black min-h-screen flex flex-col items-center justify-center p-6"><div class="flex flex-col items-center mb-12"><div class="p-3 mb-4 w-full max-w-md flex justify-center"><img src="img/logo.png" class="w-40 h-40 object-contain" alt="The Host 로고"></div> <h1>THE HOST</h1> <p>오직 생존자만이 숙주의 진실을 볼 수 있다</p></div> <div><div class="space-y-4"><p>다음 계정으로 계속하기</p> <button class="
          bg-white text-gray-700 border border-gray-300
          hover:bg-gray-100 transition
          rounded-sm shadow-md w-full py-3
          flex items-center justify-center space-x-3
          no-underline
        "><img src="/img/google-icon.svg" alt="Google" width="20" height="20"> <span class="text-sm font-medium font-sans">Google로 계속하기</span></button></div></div> <div><p>© 2025 The Host. All rights reserved.</p> <div class="mt-2"><a href="#" class="hover:text-gray-300 transition mx-2">이용약관</a> <a href="#" class="hover:text-gray-300 transition mx-2">개인정보 처리방침</a> <a href="#" class="hover:text-gray-300 transition mx-2">도움말</a></div></div></div>`);function $l(t,e){W(e,!1);function n(){window.location.href="/api/auth/google/login"}function r(){const h=new URLSearchParams(window.location.search),p=h.get("token"),b=decodeURIComponent(h.get("nickname"))||"null",k=Number(h.get("userId"));return p&&b!=="null"&&k!==0?(console.log("기존 유저, 로비 이동"),Zt({nickname:b,id:k},p),ce.set("lobby"),window.history.replaceState(null,"",window.location.pathname),!1):p&&b==="null"&&k===0?(console.log("닉네임 미설정 유저, 세팅 페이지 이동"),Zt({nickname:null,id:null},p),ce.set("setting"),window.history.replaceState(null,"",window.location.pathname),!1):(console.log("쿼리 없음, 세션 복원 시도"),!0)}We(async()=>{var p;r()&&(await ca(),(p=ne(tt).user)!=null&&p.nickname&&(console.log("기존 유저, 로비 이동"),ce.set("lobby"),window.history.replaceState(null,"",window.location.pathname)))}),V();var s=Sl(),i=m(s),o=_(m(i),2),a=_(o,2),l=_(i,2),c=m(l),d=m(c),v=_(d,2),f=_(l,2);C(()=>{y(o,1,`${u.textPrimary} text-3xl font-bold font-sans`),y(a,1,`${u.textSecondary} mt-2 text-center font-sans`),y(l,1,`${u.bgTertiary} ${u.borderPrimary} ${u.roundedDefault} ${u.shadow} w-full max-w-md p-6 mb-6 border`),y(d,1,`${u.textSecondary} text-center mb-4 font-sans`),y(f,1,`${u.textTertiary} text-xs mt-12 text-center font-sans`)}),U("click",v,n),S(t,s),j()}async function Tl(t,e={}){const n=ne(tt).token;return fetch(t,{...e,headers:{...e.headers||{},"Content-Type":"application/json",Authorization:`Bearer ${n}`},credentials:"include"})}var Al=O("<div></div>");function Rl(t,e){W(e,!1);const[n,r]=$e(),s=()=>z(tt,"$authStore",n);We(async()=>{await i()}),Xn(async()=>{vt()});async function i(){var l;const a=await pe("input","닉네임 생성","계정 닉네임을 만들어주세요. 이 닉네임은 친구를 찾는데도 활용됩니다",void 0,[{key:"nickname",label:"새 닉네임을 입력합니다",placeholder:"여기에 닉네임 입력",type:"string"}]);if(a.success)try{const c=(l=a.values)==null?void 0:l.nickname,d=await Tl("/api/auth/nickname",{method:"POST",body:JSON.stringify({nickname:c,token:s().token})}),v=await hs(d),f=await d.json();v&&f.url&&(window.location.href=f.url)}catch(c){return vs(c),await i()}}V();var o=Al();C(()=>y(o,1,`min-h-screen p-6 ${u.bgSecondary} flex flex-col items-center justify-start`)),S(t,o),j(),r()}var Ol=O('<div><div class="text-sm font-semibold truncate"> </div></div>');function Cl(t,e){W(e,!1);let n=G(e,"nickname",8),r=G(e,"playerId",8);V();var s=Ol(),i=m(s),o=m(i);C(a=>{y(s,1,a),H(o,n())},[()=>{var a;return`p-3 min-w-[6rem] max-w-[8rem] m-2 
               ${r()===Number((a=ne(ye))==null?void 0:a.hostUserId)?u.bgAccent:u.bgSecondary} 
               ${u.textWhite} 
               ${u.roundedDefault} 
               ${u.shadow} 
               text-center`}],ct),S(t,s),j()}let Xe=null;async function Nl(){var n;const t=await Te(),e=(n=ne(ye))==null?void 0:n.id;e&&(t.emit("request:room:join",{roomId:e}),Xe&&t.off("update:room:data",Xe),t.off("update:room:closed"),Xe=r=>{ye.set(r)},t.on("update:room:data",Xe),t.on("update:room:closed",async()=>await Bs("방이 사라졌습니다")))}async function Bl(t){(await Te()).emit("request:room:exit",{roomId:t})}async function Pl(){const t=await Te();Xe&&(t.off("update:room:data",Xe),Xe=null),t.off("update:room:closed")}async function Ns(){var e;const t=(e=ne(ye))==null?void 0:e.id;t&&(await Bl(t),await Pl())}async function Bs(t){pe("loading","로비 이동",t),await Ns(),Ll(),await Il(),vt()}function Ll(){ce.set("lobby"),Le.set("lobby"),ye.set(null)}async function Il(){(await Te()).emit("request:location:update",{locationState:"lobby",roomId:null})}async function kn(){var n;pe("loading","게임 시작","게임을 시작합니다...");const t=await Te(),e=(n=ne(ye))==null?void 0:n.id;e&&t.emit("request:room:start",{roomId:e}),ce.set("game"),vt()}var Dl=O('<div class="mt-6"><h3>참가자 목록</h3> <div class="flex flex-wrap justify-start"></div></div>'),ql=O("<div>방 정보를 불러올 수 없습니다.</div>"),Ml=O('<div><div><h2> </h2> <p class="mb-2"><span>방 ID:</span> <span> </span></p> <p class="mb-4"><span>참가자 수:</span> <span> </span></p> <div class="mt-4 text-center flex justify-evenly"><button>🚀 게임 시작</button> <button>🔙 방 나가기</button></div> <!></div></div>');function Fl(t,e){W(e,!1);const[n,r]=$e(),s=()=>z(ye,"$currentRoom",n);We(async()=>{pe("loading","방 정보 열기","방 정보를 서버로부터 가져옵니다"),await Nl(),vt()}),Xn(async()=>{await Ns()}),V();var i=Ml(),o=m(i),a=m(o),l=m(a),c=_(a,2),d=m(c),v=_(d,2),f=m(v),h=_(c,2),p=m(h),b=_(p,2),k=m(b),E=_(h,2),T=m(E),R=_(T,2),w=_(E,2);{var x=A=>{var $=Dl(),I=m($),X=_(I,2);me(X,5,()=>{var Q;return((Q=s())==null?void 0:Q.players)||[]},Ee,(Q,ue)=>{Cl(Q,{get playerId(){return g(ue).id},get nickname(){return g(ue).nickname}})}),C(()=>y(I,1,`mb-2 text-lg font-bold ${u.textAccentStrong}`)),S(A,$)},N=A=>{var $=ql();C(()=>y($,1,`mt-6 text-center ${u.textWarning}`)),S(A,$)};D(w,A=>{s()?A(x):A(N,!1)})}C(()=>{var A,$,I;y(i,1,`min-h-screen flex items-center justify-center ${u.bgSecondary}`),y(o,1,`w-full max-w-md p-6 m-4
                  border ${u.borderPrimary}
                  ${u.roundedDefault}
                  ${u.shadow}
                  ${u.bgTertiary}
                  ${u.textPrimary}`),y(a,1,`text-xl font-bold mb-4 ${u.textWhite}`),H(l,`🧾 대기실 - ${((A=s())==null?void 0:A.name)||"이름 없음"}`),y(d,1,`${u.textSecondary} font-semibold`),y(v,1,`${u.textWhite} ml-2`),H(f,($=s())==null?void 0:$.id),y(p,1,`${u.textSecondary} font-semibold`),y(b,1,`${u.textWhite} ml-2`),H(k,`${((I=s())==null?void 0:I.players.length)??""}명`),y(T,1,`px-4 py-2 ${u.bgAccent} text-white font-semibold rounded-lg shadow-md transition`),y(R,1,`px-4 py-2 ${u.bgSecondary} text-white font-semibold rounded-lg shadow-md transition`)}),U("click",T,function(...A){kn==null||kn.apply(this,A)}),U("click",R,()=>Bs("로비로 이동합니다...")),S(t,i),j(),r()}var Ul=O("<!> <!>",1);function Wl(t){const[e,n]=$e(),r=()=>z(ce,"$pageStore",e);var s=Ul(),i=le(s);$o(i);var o=_(i,2);{var a=c=>{$l(c,{})},l=(c,d)=>{{var v=h=>{Rl(h,{})},f=(h,p)=>{{var b=E=>{El(E,{})},k=(E,T)=>{{var R=x=>{Fl(x,{})},w=(x,N)=>{{var A=$=>{oa($,{})};D(x,$=>{r()==="game"&&$(A)},N)}};D(E,x=>{r()==="room"||r()==="host"?x(R):x(w,!1)},T)}};D(h,E=>{r()==="lobby"?E(b):E(k,!1)},p)}};D(c,h=>{r()==="setting"?h(v):h(f,!1)},d)}};D(o,c=>{r()==="login"?c(a):c(l,!1)})}S(t,s),n()}window.currentRoom=ye;window.get=ne;qi(Wl,{target:document.getElementById("app")});
