# 인게임 플레이어 동작 명령어

봇 플레이어 조작을 위한 게임 내 동작 명령어 목록입니다.

## 1. 이동 명령
- **myStatus.next**: 다음 턴에 이동할 지역 설정
  - 값: `"해안"`, `"폐건물"`, `"정글"`, `"동굴"`, `"산 정상"`, `"개울"`

## 2. 좀비 대응 행동
- **myStatus.act**: 좀비 조우 시 행동 선택
  - `"lure"`: 유인하기
  - `"hide"`: 숨기
  - `"runaway"`: 도망가기

## 3. 채팅
- **chatMessage**: 같은 지역 플레이어에게 메시지 전송
  - 값: 문자열 메시지

## 4. 아이템 사용
- **useItem**: 아이템 사용
  - `spray`: 그래피티 남기기
  - `eraser`: 그래피티 지우기
  - `virusChecker`: 감염 확인
  - `medicine`: 감염 치료
  - `vaccine`: 좀비 치료
  - `shotgun`: 좀비 사살
  - `wireless`: 귀속말 (대상 플레이어 ID 필요)
  - `microphone`: 전체 방송

## 5. 아이템 전달
- **giveItem**: 아이템 주기
  - 필요: 받는 사람 ID, 아이템 타입

## 6. 호스트 전용 동작
- **hostAct.infect**: 플레이어 감염시키기 (대상 ID 필요)
- **hostAct.zombieList**: 좀비 제어
  - 각 좀비의 이동 목적지와 공격 대상 설정

## 7. 봇 플레이어 행동 트리거 조건

봇이 행동을 실행하는 트리거 조건은 다음 3가지로 구성됩니다:

### 1. 시간 트리거
- 턴 시작 후 X초 경과 시 특정 행동 실행

### 2. 채팅 트리거
- 채팅창에 표시되는 모든 메시지 감지
  - 시스템 메시지 (좀비 출현, 아이템 획득 등)
  - 플레이어 메시지
  - 특정 키워드나 패턴 매칭

### 3. 무전기/마이크 트리거
- **무전기 귀속말 수신**: 특정 플레이어로부터의 개인 메시지
- **마이크 전체 방송 수신**: 모든 지역에 전달되는 방송 메시지

## 8. 봇 행동 결정에 필요한 정보

봇이 적절한 행동을 결정하기 위해 제공해야 할 정보:

1. **이전 턴 요약**
   - LLM이 중요도에 따라 자동 요약

2. **현재 턴 채팅 내용**
   - 모든 채팅 메시지

3. **현재 턴 봇의 보유 아이템**
   - 보유 중인 아이템 목록

4. **현재 턴 같은 구역의 생존자 정보**
   - 같은 구역에 있는 플레이어 목록

5. **턴 정보**
   - 현재 턴 번호

6. **구역 낙서**
   - 현재 구역의 그래피티 메시지

7. **도망 가능 여부**
   - runaway 사용 가능 여부

8. **봇의 역할**
   - 호스트인지 생존자인지

## 9. 봇 코드 작동 아키텍처

봇 플레이어의 전체 작동 구조:

### 1. 턴 시작 시 초기화
- **턴 시작 직후**: 행동 결정 정보를 LLM에 제공
- **LLM 요청**: 행동 조건 트리거 5개를 JSON 형식으로 생성
- **레디스 저장**: 응답받은 트리거 조건들을 레디스에 저장

### 2. 실시간 모니터링
- **조건 감시**: 저장된 트리거 조건들을 지속적으로 확인
- **트리거 충족**: 조건이 만족되면 다음 단계로 진행

### 3. 행동 실행
- **LLM 호출**: 현재 업데이트된 행동 정보 제공
- **JSON 응답**: LLM이 수행할 행동을 JSON 형식으로 반환
- **함수 실행**: JSON 내용에 따라 적절한 메서드/함수 호출

### 4. 턴 종료 처리
- **정보 수집**: 이번 턴의 모든 이벤트와 이전 턴 정보 수집
- **메모 요청**: LLM에게 중요 정보 요약 및 메모 업데이트 요청
- **다음 턴 준비**: 업데이트된 메모를 다음 턴에 활용

### 흐름도
```
턴 시작 → 트리거 생성 → 레디스 저장 → 조건 모니터링 
    ↓                                      ↓
턴 종료 ← 메모 업데이트 ← 행동 실행 ← LLM 호출 (조건 충족 시)
```