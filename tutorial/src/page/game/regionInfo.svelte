<script lang="ts">
  import { THEME } from '../../common/constant/theme';

  export let regionName: string = 'íê±´ë¬¼';
  export let turnInfo: string = '45ì´ˆ ë‚¨ìŒ';
  export let recentMessages: string[] = [
    'ì¶”ë¦¬ì¢€ í•˜ê²Œ ë‚™ì„œ ì¢€ ì§€ìš°ì§€ ë§ˆë¼... ëˆ„ê°€ ì§€ìš°ê³  ë‹¤ë‹ˆëƒã…¡ã…¡',
    'ì§€ì›Œì§„ ë‚™ì„œ',
    'ëŠ‘ëŒ€ê°€ 12í„´ì§¸ í•´ì•ˆê°€ì—ì„œ ì¢€ë¹„í•œí…Œ ì£½ì—ˆëŒ€',
    '10í„´ì§¸ ìˆ˜ë‹¬ì´ ì—¬ê¸°ì„œ ì¢€ë¹„ë¨',
    'ì§€ì›Œì§„ ë‚™ì„œ',
    'ì—¥ 2ë²ˆì§¸ ë‚™ì„œ ê°€ì§œ ì •ë³´ ê°™ì€ë°....',
    'ê¹Œë§ˆê·€ ì¢€ ìˆ˜ìƒí•˜ì§€ ì•Šì•„? - í† ë¼ê°€',
    'ì§€ì›Œì§„ ë‚™ì„œ',
    'ë‚˜ ì—¬ê¸°ì—ì„œ ì§„ë‹¨í‚¤íŠ¸ ì¨ë´¤ëŠ”ë° ê·¸ìƒˆ ê°ì—¼ë¬ë”ë¼.... - ê³ ìŠ´ë„ì¹˜ê°€',
  ];

  let showAllMessages = false;
</script>

<!-- âœ… ìƒë‹¨ ì •ë³´ + ìµœê·¼ 3ê°œ ë©”ì‹œì§€ -->
<div class={`${THEME.bgSecondary} ${THEME.textWhite} p-3 border-b ${THEME.borderPrimary}`}>
  <div class="flex justify-between items-center mb-1">
    <span class="text-sm font-semibold">í˜„ì¬ êµ¬ì—­: {regionName}</span>
    <span class={`text-sm ${THEME.textWarning}`}>{turnInfo}</span>
  </div>
  <div class="text-xs space-y-0.5 cursor-pointer" on:click={() => showAllMessages = true}>
    {#each recentMessages.slice(0, 3) as message}
      <p class="truncate">â€¢ {message}</p>
    {/each}
    <p class={`text-right underline ${THEME.textAccent}`}>+ ì „ì²´ ë©”ì„¸ì§€ ë³´ê¸°</p>
  </div>
</div>

<!-- âœ… ëª¨ë‹¬ë¡œ ì „ì²´ ë©”ì‹œì§€ í‘œì‹œ -->
{#if showAllMessages}
  <div class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50" on:click={() => showAllMessages = false}>
    <div class={`w-80 max-h-[80vh] overflow-y-auto p-4 ${THEME.bgTertiary} ${THEME.textWhite} ${THEME.roundedDefault}`} on:click|stopPropagation>
      <h2 class="text-lg font-bold mb-3">ğŸ“ ì§€ì—­ ë‚™ì„œ ì „ì²´ ë³´ê¸°</h2>
      <ul class="space-y-1 text-sm">
        {#each recentMessages as msg}
          <li class="leading-snug">â€¢ {msg}</li>
        {/each}
      </ul>
      <button
        class={`mt-4 w-full py-2 ${THEME.bgDisabled} ${THEME.textWhite} ${THEME.roundedDefault}`}
        on:click={() => showAllMessages = false}
      >
        ë‹«ê¸°
      </button>
    </div>
  </div>
{/if}
